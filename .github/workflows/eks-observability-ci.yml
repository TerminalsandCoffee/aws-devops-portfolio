# name: eks-observability-ci
# on:
#   push:
#     branches: [ main ]
#     paths:
#       - 'projects/02-eks-observability-stack/**'
#       - '.github/workflows/eks-observability-ci.yml'
#   pull_request:
#     paths:
#       - 'projects/02-eks-observability-stack/**'
#       - '.github/workflows/eks-observability-ci.yml'
#   workflow_dispatch:

# ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
# Workflow is intentionally disabled until the project is ready.
# To re-enable: delete the "disabled" job (or just the "if: false" line)
# ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←

jobs:
  disabled:
    if: false   # This single line disables everything below it
    runs-on: ubuntu-latest
    steps:
      - run: echo "This workflow is snoozing until further notice"

  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Set up Helm
        uses: azure/setup-helm@v4

      - name: Set up Terraform
        uses: hashicorp/setup-terraform@v3
        with:
          terraform_wrapper: false

      - name: Lint YAML
        run: |
          sudo apt-get update && sudo apt-get install -y yamllint
          yamllint -d "{extends: default, rules: {line-length: {max: 140}}}" projects/02-eks-observability-stack

      - name: Helm lint sample app chart
        run: helm lint projects/02-eks-observability-stack/charts/sample-app

      - name: Terraform validate (if Terraform is used)
        working-directory: projects/02-eks-observability-stack/infra/terraform
        run: |
          terraform fmt -check
          terraform validate
